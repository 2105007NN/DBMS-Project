<%- include('../../partials/head.ejs') %>

<div class="container mt-3">
  <div class="row">
    <% for(let i=0;i<products.length;i++) { %>
    <div class="col-md-4">
      <div class="card text-black bg-light mb-3" style="width: 18rem;">

        <img class="card-img-top" src="<%= products[i][6] || '/images/pp1.jpg' %>" alt="<%= products[i][5] %>"
          style="width: 100%; height: 200px;">
        <div class="card-body" style="height: 150px;"> <!-- Set a fixed height for the card body -->
          <h5 class="card-title" style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;">
            <%= products[i][5] %>
          </h5>
          <p class="card-text">Rating: <%= products[i][7] %></p>

          <div class="text-center"> <!-- Center the button -->
            <a href="<%= subcategoryId %>/product/<%= products[i][0] %>" class="btn btn-primary">View Product</a>
          </div>
        </div>
      </div>
    </div>
    <% if ((i + 1) % 3 === 0) { %>
  </div>
  <div class="row">
    <% } %>
    <% } %>
  </div>
</div>

<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
    <% if(parseInt(skip)>0){%>
    <li class="page-item"><a class="page-link" href="<%= subcategoryId %>?limit=<%= limit %>&skip=<%= parseInt(skip) - parseInt(limit) %>">Previous</a></li>
    <% }else{ %>
    <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
    <% }if(parseInt(skip) + parseInt(limit)<parseInt(maxSkip)){%>
    <li class="page-item"><a class="page-link" href="<%= subcategoryId %>?limit=<%= limit %>&skip=<%= parseInt(skip) + parseInt(limit) %>">Next</a></li>
      <% }else{ %>
    <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
    <% } %>
  </ul>
</nav>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>

</html>
